<!-- entete -->
<div class=" card p-3 position-sticky top-0 z-1">
  <div class="d-flex align-items-center justify-content-between mb-1">
    <div class="fs-4 fw-bold">
      Bienss {{list.length==les_bienss.length?list.length:list.length + "/" + les_bienss.length}}
    </div>
    <div class="d-flex">
      <button class="btn btn-primary" (click)="openModal_add_biens()"><i class="bi bi-plus-square-dotted"></i>
        Biens</button>
    </div>
  </div>
  <div class="d-flex gap-1 justify-content-end">
    <ng-select [multiple]="true" [closeOnSelect]="false" placeholder="Rechercher ici ..." notFoundText="Aucun résultat"
      class="no-limit" [(ngModel)]="filter.text" (search)="filter_change($event)" (change)="filter_change()"
      style="min-width: 400px;">
      <!-- <ng-option disabled>Zones</ng-option>
        @for (let zone of donnees_select.zone) {
          <ng-option [value]="'zone_'+zone.id_zone">
            {{ zone.nom }}
          </ng-option>
        }

        <ng-option disabled>Domaines</ng-option>
        @for (let domaine of donnees_select.domaine) {
          <ng-option [value]="'domaine_'+domaine.id_domaine">
            {{ domaine.nom }}
          </ng-option>
        }-->
    </ng-select>
  </div>
</div>
<!-- Liste des éléments sous forme de tableau -->
<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">id_bien</th>
        <th scope="col">uuid</th>
        <th scope="col">proprietaire_user_id</th>
        <th scope="col">type_bien_id</th>
        <th scope="col">etat_bien_id</th>
        <th scope="col">statut_validation_id</th>
        <th scope="col">titre</th>
        <th scope="col">description</th>
        <th scope="col">region_id</th>
        <th scope="col">zone_id</th>
        <th scope="col">adresse_detaillee</th>
        <th scope="col">latitude</th>
        <th scope="col">longitude</th>
        <th scope="col">superficie</th>
        <th scope="col">chambres</th>
        <th scope="col">salles_bain</th>
        <th scope="col">capacite</th>
        <th scope="col">prix</th>
        <th scope="col">devise</th>
        <th scope="col">date_publication</th>
        <th scope="col">date_modification</th>
        <th scope="col">raison_refus</th>
        <th scope="col">is_archived</th>
        <th scope="col">actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Affichage du message de chargement -->
      @if (loading_get_biens) {
      <tr>
        <td colspan="24" class="text-center">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Chargement...</span>
          </div>
        </td>
      </tr>
      }
      <!-- Affichage du message lorsqu'il n'y a pas d'éléments -->
      @if (list.length == 0) {
      <tr>
        <td colspan="24" class="text-center">
          <div class="alert alert-info" role="alert">
            Aucune donnée trouvée.
          </div>
        </td>
      </tr>
      }
      <!-- Boucle pour afficher chaque élément de la liste -->
      @for (one_biens of list; track one_biens) {
      <tr>
        <td>{{one_biens.id_bien}}</td>
        <td>{{one_biens.uuid}}</td>
        <td>{{one_biens.proprietaire_user_id}}</td>
        <td>{{one_biens.type_bien_id}}</td>
        <td>{{one_biens.etat_bien_id}}</td>
        <td>{{one_biens.statut_validation_id}}</td>
        <td>{{one_biens.titre}}</td>
        <td>{{one_biens.description}}</td>
        <td>{{one_biens.region_id}}</td>
        <td>{{one_biens.zone_id}}</td>
        <td>{{one_biens.adresse_detaillee}}</td>
        <td>{{one_biens.latitude}}</td>
        <td>{{one_biens.longitude}}</td>
        <td>{{one_biens.superficie}}</td>
        <td>{{one_biens.chambres}}</td>
        <td>{{one_biens.salles_bain}}</td>
        <td>{{one_biens.capacite}}</td>
        <td>{{one_biens.prix}}</td>
        <td>{{one_biens.devise}}</td>
        <td>{{one_biens.date_publication}}</td>
        <td>{{one_biens.date_modification}}</td>
        <td>{{one_biens.raison_refus}}</td>
        <td>{{one_biens.is_archived}}</td>
        <td>
          <i style="cursor: pointer;" class="bi bi-pencil-square me-2" (click)="openModal_edit_biens(one_biens)"></i>
          <i style="cursor: pointer;" class="bi bi-trash" (click)="delete_biens(one_biens)"></i>
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>
